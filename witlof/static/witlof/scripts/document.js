!function e(t,n,r){function o(i,u){if(!n[i]){if(!t[i]){var s="function"==typeof require&&require;if(!u&&s)return s(i,!0);if(a)return a(i,!0);var c=new Error("Cannot find module '"+i+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[i]={exports:{}};t[i][0].call(l.exports,function(e){var n=t[i][1][e];return o(n?n:e)},l,l.exports,e,t,n,r)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,t,n){"use strict";function r(e){return{type:"RECEIVE_DOCUMENT",schema:e.schema,data:e.content}}function o(e){return function(t){return fetch("../../api/document/"+e+"/",(0,p.fetchInit)()).then(function(e){return e.json()}).then(function(e){return t(r(e))})}}function a(e,t){return{type:"ADD_ITEM",dataPath:e,schemaPath:t}}function i(e,t){return{type:"ADD_ITEM_ABOVE",dataPath:e,schemaPath:t}}function u(e){return{type:"MOVE_ITEM_UP",dataPath:e}}function s(e){return{type:"MOVE_ITEM_DOWN",dataPath:e}}function c(e){return{type:"REMOVE_ITEM",dataPath:e}}function l(e,t){return{type:"FIELD_VALUE_CHANGE",dataPath:e,newValue:t}}function f(e,t,n){return function(r){var o=new FormData;return o.append("file",n),fetch("../../api/document/"+e+"/image/",(0,p.fetchInit)("POST",o)).then(function(e){return e.json()}).then(function(e){return r(l(t,e))})}}function d(e,t,n){return function(r){var o=new FormData;return o.append("file",n),fetch("../../api/document/"+e+"/attachment/",(0,p.fetchInit)("POST",o)).then(function(e){return e.json()}).then(function(e){return r(l(t,e))})}}Object.defineProperty(n,"__esModule",{value:!0}),n.receiveDocument=r,n.fetchDocument=o,n.addItem=a,n.addItemAbove=i,n.moveItemUp=u,n.moveItemDown=s,n.removeItem=c,n.fieldValueChange=l,n.postImage=f,n.postFile=d;var p=e("../utils")},{"../utils":17}],2:[function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t}function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("react"),l=o(c),f=e("react-redux"),d=e("redux"),p=e("../actions"),h=r(p),m=e("./Document"),y=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),s(t,[{key:"render",value:function(){return void 0===this.props.document.get("schema")?l["default"].createElement("div",null):l["default"].createElement(m.Document,{actions:(0,d.bindActionCreators)(h,this.props.dispatch),schema:this.props.document.get("schema"),data:this.props.document.get("data")})}}]),t}(c.Component);y.propTypes={document:c.PropTypes.object.isRequired},n["default"]=(0,f.connect)(function(e){return{document:e.get("document")}})(y)},{"../actions":1,"./Document":3,react:"react","react-redux":"react-redux",redux:"redux"}],3:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0}),n.Document=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("immutable"),c=e("react"),l=r(c),f=e("./fields/Field"),d=r(f),p=n.Document=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.schema,n=e.data,r=e.actions,o=s.List.of("fields"),a=new s.List;return l["default"].createElement("fieldset",{className:"document"},t.get("fields").map(function(e,t){return l["default"].createElement(d["default"],{key:e.get("name"),field:e,schemaPath:o.push(t),dataPath:a.push(e.get("name")),data:n.get(e.get("name")),actions:r})}),l["default"].createElement("input",{type:"hidden",name:"content",value:JSON.stringify(n.toJS())}))}}]),t}(c.Component);p.propTypes={schema:c.PropTypes.instanceOf(s.Map).isRequired,data:c.PropTypes.instanceOf(s.Map).isRequired,actions:c.PropTypes.object.isRequired}},{"./fields/Field":7,immutable:"immutable",react:"react"}],4:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("react"),c=r(s),l=e("./SimpleField"),f=r(l),d=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render_input",value:function(e,t,n,r){return c["default"].createElement("input",{type:"text",id:e,value:t,onChange:function(e){return r.fieldValueChange(n,e.target.value)}})}}]),t}(f["default"]);n["default"]=d},{"./SimpleField":12,react:"react"}],5:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("react"),c=r(s),l=e("./Field"),f=r(l),d=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.schemaPath,n=e.dataPath,r=e.field,o=e.data,a=e.actions;return c["default"].createElement("fieldset",{className:"dict"},c["default"].createElement("legend",null,r.get("verbose_name")),r.get("fields").map(function(e,r){return c["default"].createElement(f["default"],{key:e.get("name"),field:e,schemaPath:t.push(r),dataPath:n.push(e.get("name")),data:o.get(e.get("name")),actions:a})}))}}]),t}(s.Component);n["default"]=d},{"./Field":7,react:"react"}],6:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("immutable"),c=r(s),l=e("react"),f=r(l),d=e("../../../utils"),p=e("./SimpleField"),h=r(p),m=e("./utils"),y=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={timestamp:Date.now()},n}return i(t,e),u(t,[{key:"render_input",value:function(e,t,n,r){var o=this;return f["default"].createElement("div",null,f["default"].createElement(_,{timestamp:this.state.timestamp,id:e,dataPath:n,selectedNode:t?t.toJS():null,onSave:this.onModalSave.bind(this)}),f["default"].createElement("button",{className:"btn btn-secondary btn-sm",onClick:function(e){return o.handleClick(e)}},"Select"),f["default"].createElement("div",{className:"document"},t?t.get("title"):""))}},{key:"onModalSave",value:function(e,t){this.props.actions.fieldValueChange(this.props.dataPath,c["default"].fromJS(t)),$("#"+(0,m.id_of_path)(this.props.dataPath)).modal("hide")}},{key:"handleClick",value:function(e){e.preventDefault(),$("#"+(0,m.id_of_path)(this.props.dataPath)).modal({backdrop:"static"}),this.setState(function(e){e.timestamp;return{timestamp:Date.now()}})}}]),t}(h["default"]);n["default"]=y;var b=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={children:[]},n}return i(t,e),u(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.modalId,r=t.selectValue,o=t.selectedNode,a=t.node;return f["default"].createElement("li",{className:"node"},f["default"].createElement("input",{type:"radio",name:n,checked:a.id===(o?o.id:null),onChange:function(t){return e.props.selectValue(a)}}),f["default"].createElement("span",null,f["default"].createElement("button",{className:"btn btn-link",onClick:function(t){return e.loadChildren(t,a.id)}},a.title)),f["default"].createElement(v,{modalId:n,selectValue:r,selectedNode:o,nodes:this.state.children}))}},{key:"loadChildren",value:function(e,t){var n=this;e.preventDefault(),fetch("../../api/node/"+t+"/",(0,d.fetchInit)()).then(function(e){return e.json()}).then(function(e){return n.setState(function(t){t.children;return{children:e.children}})})}}]),t}(l.Component),v=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.modalId,n=e.selectValue,r=e.selectedNode,o=e.nodes;return f["default"].createElement("ul",{className:"node-list"},o.map(function(e){return f["default"].createElement(b,{key:e.id,modalId:t,selectValue:n,selectedNode:r,node:e})}))}}]),t}(l.Component),_=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={node:null,selectedNode:null,timestamp:null},n}return i(t,e),u(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.timestamp!==this.state.timestamp&&(this.setState(function(e){e.node;return{node:null}}),this.setState(function(e){e.selectedNode;return{selectedNode:t.props.selectedNode}}),this.setState(function(t){t.timestamp;return{timestamp:e.timestamp}}),fetch("../../api/node/1/",(0,d.fetchInit)()).then(function(e){return e.json()}).then(function(e){return t.setState(function(t){t.node;return{node:e}})}))}},{key:"render",value:function(){var e=this;return f["default"].createElement("div",{id:this.props.id,className:"modal fade"},f["default"].createElement("div",{className:"modal-dialog",role:"document"},f["default"].createElement("div",{className:"modal-content"},f["default"].createElement("div",{className:"modal-header"},f["default"].createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},f["default"].createElement("span",{"aria-hidden":"true"},"×")),f["default"].createElement("h4",{className:"modal-title"},"Modal title")),f["default"].createElement("div",{className:"modal-body"},this.state.node?f["default"].createElement(b,{modalId:this.props.id,selectValue:this.selectValue.bind(this),selectedNode:this.state.selectedNode,node:this.state.node.node}):""),f["default"].createElement("div",{className:"modal-footer"},f["default"].createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close"),f["default"].createElement("button",{type:"button",className:"btn btn-primary",onClick:function(t){return e.props.onSave(t,e.state.selectedNode)}},"Save changes")))))}},{key:"selectValue",value:function(e){var t=this;null===this.state.selectedNode?this.setState(function(t){t.selectedNode;return{selectedNode:e}}):this.setState(function(n){n.selectedNode;return{selectedNode:t.state.selectedNode.id===e.id?null:e}})}}]),t}(l.Component)},{"../../../utils":17,"./SimpleField":12,"./utils":14,immutable:"immutable",react:"react"}],7:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("immutable"),c=e("react"),l=r(c),f=e("./DictField"),d=r(f),p=e("./ListField"),h=r(p),m=e("./CharField"),y=r(m),b=e("./TextField"),v=r(b),_=e("./HtmlField"),w=r(_),g=e("./ImageField"),E=r(g),O=e("./FileField"),P=r(O),T=e("./DocumentLinkField"),j=r(T),k=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){switch(this.props.field.get("type")){case"DictField":return l["default"].createElement(d["default"],this.props);case"ListField":return l["default"].createElement(h["default"],this.props);case"CharField":return l["default"].createElement(y["default"],this.props);case"TextField":return l["default"].createElement(v["default"],this.props);case"HtmlField":return l["default"].createElement(w["default"],this.props);case"ImageField":return l["default"].createElement(E["default"],this.props);case"FileField":return l["default"].createElement(P["default"],this.props);case"DocumentLinkField":return l["default"].createElement(j["default"],this.props);default:return l["default"].createElement("div",{className:"error"},"Unknown document field type: ",l["default"].createElement("code",null,this.props.field.get("type")))}return res}}]),t}(c.Component);n["default"]=k,k.propTypes={schemaPath:c.PropTypes.instanceOf(s.List).isRequired,dataPath:c.PropTypes.instanceOf(s.List).isRequired,field:c.PropTypes.instanceOf(s.Map).isRequired,data:c.PropTypes.any,actions:c.PropTypes.object.isRequired}},{"./CharField":4,"./DictField":5,"./DocumentLinkField":6,"./FileField":8,"./HtmlField":9,"./ImageField":10,"./ListField":11,"./TextField":13,immutable:"immutable",react:"react"}],8:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("react"),c=r(s),l=e("numeral"),f=r(l),d=e("react-dropzone"),p=r(d),h=e("./SimpleField"),m=r(h),y=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render_input",value:function(e,t,n,r){return c["default"].createElement("div",{className:"dropzone-container"},c["default"].createElement(p["default"],{onDrop:this.onDrop.bind(this),multiple:!1,className:"dropzone",activeClassName:"dropzone dropzone-active"},c["default"].createElement("span",{className:"fa fa-file"})),t?this.render_file():"")}},{key:"onDrop",value:function(e){var t=this.props,n=t.dataPath,r=t.actions;r.postFile(window.witlof.documentId,n,e[0])}},{key:"render_file",value:function(){var e=this,t=this.props.data;return c["default"].createElement("div",{className:"preview"},c["default"].createElement("div",{className:"data"},c["default"].createElement("button",{title:"Remove",className:"action action-remove fa fa-times-circle",onClick:function(t){return e.handleRemove(t)}}),c["default"].createElement("div",{className:"link"},c["default"].createElement("a",{className:"link",href:t.get("link"),target:"_blank"},t.get("name"))),c["default"].createElement("div",{className:"size"},"Size: ",(0,f["default"])(t.get("size")).format("0.0 b")),c["default"].createElement("div",{className:"type"},"Type: ",t.get("content_type"))))}},{key:"handleRemove",value:function(e){e.preventDefault(),confirm("Are you sure you want to delete this attachment?")&&this.props.actions.removeItem(this.props.dataPath)}}]),t}(m["default"]);n["default"]=y},{"./SimpleField":12,numeral:"numeral",react:"react","react-dropzone":"react-dropzone"}],9:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("react"),c=r(s),l=e("../../../utils"),f=e("./utils"),d=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.field.getIn(["options","froala"]).set("imageUploadURL","../../api/document/"+window.witlof.documentId+"/image/").setIn(["imageUploadParams","csrfmiddlewaretoken"],l.CSRF_TOKEN).set("fileUploadURL","../../api/document/"+window.witlof.documentId+"/attachment/").setIn(["fileUploadParams","csrfmiddlewaretoken"],l.CSRF_TOKEN),n=$("#"+(0,f.id_of_path)(this.props.dataPath)).froalaEditor(t.toJS());n.on("froalaEditor.contentChanged",function(t,n){return e.props.actions.fieldValueChange(e.props.dataPath,n.html.get())})}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.dataPath,r=e.field,o=(0,f.id_of_path)(n);return c["default"].createElement("div",{className:"field field-HtmlField"},c["default"].createElement("label",{htmlFor:o},r.get("verbose_name")),c["default"].createElement("textarea",{id:o,value:t,onChange:function(e){return e}}))}}]),t}(s.Component);n["default"]=d},{"../../../utils":17,"./utils":14,react:"react"}],10:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("react"),c=r(s),l=e("numeral"),f=r(l),d=e("react-dropzone"),p=r(d),h=e("./SimpleField"),m=r(h),y=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render_input",value:function(e,t,n,r){return c["default"].createElement("div",{className:"dropzone-container"},c["default"].createElement(p["default"],{onDrop:this.onDrop.bind(this),multiple:!1,className:"dropzone",activeClassName:"dropzone dropzone-active"},c["default"].createElement("span",{className:"fa fa-image"})),t?this.render_file():"")}},{key:"onDrop",value:function(e){var t=this.props,n=t.dataPath,r=t.actions;r.postImage(window.witlof.documentId,n,e[0])}},{key:"render_file",value:function(){var e=this,t=this.props.data;return c["default"].createElement("div",{className:"preview"},c["default"].createElement("a",{className:"image",href:t.get("link"),target:"_blank"},c["default"].createElement("img",{src:t.get("link"),target:"_blank"})),c["default"].createElement("div",{className:"data"},c["default"].createElement("button",{title:"Remove",className:"action action-remove fa fa-times-circle",onClick:function(t){return e.handleRemove(t)}}),c["default"].createElement("div",{className:"link"},c["default"].createElement("a",{className:"link",href:t.get("link"),target:"_blank"},t.get("name"))),c["default"].createElement("div",{className:"size"},"Size: ",(0,f["default"])(t.get("size")).format("0.0 b")),c["default"].createElement("div",{className:"type"},"Type: ",t.get("content_type"))))}},{key:"handleRemove",value:function(e){e.preventDefault(),confirm("Are you sure you want to delete this image?")&&this.props.actions.removeItem(this.props.dataPath)}}]),t}(m["default"]);n["default"]=y},{"./SimpleField":12,numeral:"numeral",react:"react","react-dropzone":"react-dropzone"}],11:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("react"),c=r(s),l=e("./Field"),f=r(l),d=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this,t=this.props.field;return c["default"].createElement("fieldset",{className:"list"},c["default"].createElement("legend",null,t.get("verbose_name")),this.render_items(),c["default"].createElement("button",{className:"add-item",onClick:function(t){return e.handleAdd(t)}},c["default"].createElement("span",{className:"action action-add fa fa-plus-circle"}),c["default"].createElement("span",{className:"text"},"Add another ",t.get("verbose_name")," block")))}},{key:"render_items",value:function(){var e=this.props,t=e.schemaPath,n=e.dataPath,r=e.field,o=e.data,a=e.actions;return void 0==o?new List:o.map(function(e,i){return c["default"].createElement(p,{key:e.get("_key"),countItems:o.size,itemIndex:i,field:r,actions:a,data:e,schemaPath:t.push("fields"),dataPath:n.push(i)})})}},{key:"handleAdd",value:function(e){e.preventDefault(),this.props.actions.addItem(this.props.dataPath,this.props.schemaPath)}}]),t}(s.Component);n["default"]=d;var p=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.countItems,r=t.itemIndex,o=t.schemaPath,a=t.dataPath,i=t.field,u=t.data,s=t.actions;return c["default"].createElement("fieldset",{className:"item"},i.get("fields").map(function(e,t){return c["default"].createElement(f["default"],{key:e.get("name"),field:e,schemaPath:o.push(t),dataPath:a.push(e.get("name")),data:u.get(e.get("name")),actions:s})}),c["default"].createElement("div",{className:"actions"},0===r?"":c["default"].createElement("button",{title:"Move up",className:"action action-up fa fa-chevron-circle-up",onClick:function(t){return e.handleMoveUp(t)}}),r===n-1?"":c["default"].createElement("button",{title:"Move down",className:"action action-down fa fa-chevron-circle-down",onClick:function(t){return e.handleMoveDown(t)}}),c["default"].createElement("button",{title:"Remove",className:"action action-remove fa fa-times-circle",onClick:function(t){return e.handleRemove(t)}}),c["default"].createElement("button",{title:"Add another above",className:"action action-add fa fa-plus-circle",onClick:function(t){return e.handleAddAbove(t)}})))}},{key:"handleAddAbove",value:function(e){e.preventDefault(),this.props.actions.addItemAbove(this.props.dataPath,this.props.schemaPath)}},{key:"handleMoveUp",value:function(e){e.preventDefault(),this.props.actions.moveItemUp(this.props.dataPath)}},{key:"handleMoveDown",value:function(e){e.preventDefault(),this.props.actions.moveItemDown(this.props.dataPath)}},{key:"handleRemove",value:function(e){e.preventDefault(),confirm("Are you sure you want to delete this element?")&&this.props.actions.removeItem(this.props.dataPath)}}]),t}(s.Component)},{"./Field":7,react:"react"}],12:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("react"),c=r(s),l=e("./utils"),f=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render_choices",value:function(e,t,n,r,o){return c["default"].createElement("select",{id:e,value:t,onChange:function(e){return o.fieldValueChange(n,e.target.value)}},c["default"].createElement("option",{value:""},"---- Please select ----"),r.map(function(e){return c["default"].createElement("option",{key:e.get(0),value:e.get(0)},e.get(1))}))}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.dataPath,r=e.field,o=e.actions,a=(0,l.id_of_path)(n),i=r.get("type");return null!==r.get("choices")?c["default"].createElement("div",{className:"field field-"+i+" field-choice"},c["default"].createElement("label",{htmlFor:a},r.get("verbose_name")),this.render_choices(a,t,n,r.get("choices"),o)):c["default"].createElement("div",{className:"field field-"+i},c["default"].createElement("label",{htmlFor:a},r.get("verbose_name")),this.render_input(a,t,n,o))}}]),t}(s.Component);n["default"]=f},{"./utils":14,react:"react"}],13:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("react"),c=r(s),l=e("./utils"),f=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),u(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.dataPath,r=e.field,o=e.actions,a=(0,l.id_of_path)(n);return c["default"].createElement("div",{className:"field field-TextField"},c["default"].createElement("label",{htmlFor:a},r.get("verbose_name")),c["default"].createElement("textarea",{id:a,value:t,onChange:function(e){return o.fieldValueChange(n,e.target.value)}}))}}]),t}(s.Component);n["default"]=f},{"./utils":14,
react:"react"}],14:[function(e,t,n){"use strict";function r(e){return e.unshift("document").join("__")}Object.defineProperty(n,"__esModule",{value:!0}),n.id_of_path=r},{}],15:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}e("../utils");var o=e("react"),a=r(o),i=e("react-dom"),u=e("redux"),s=e("redux-thunk"),c=r(s),l=e("react-redux"),f=e("./reducers"),d=r(f),p=e("./components/App"),h=r(p),m=e("./actions"),y=(0,u.applyMiddleware)(c["default"])(u.createStore),b=y(d["default"],f.initialState);b.dispatch((0,m.fetchDocument)(b.getState().getIn(["document","id"]))),(0,i.render)(a["default"].createElement(l.Provider,{store:b},a["default"].createElement(h["default"],{documentId:window.witlof.documentId})),document.getElementById("document-app"))},{"../utils":17,"./actions":1,"./components/App":2,"./reducers":16,react:"react","react-dom":"react-dom","react-redux":"react-redux",redux:"redux","redux-thunk":"redux-thunk"}],16:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=arguments.length<=0||void 0===arguments[0]?f:arguments[0],t=arguments[1];switch(t.type){case"RECEIVE_DOCUMENT":return e.updateIn(["document","schema"],function(e){return c["default"].fromJS(t.schema)}).updateIn(["document","data"],function(e){return u(c["default"].fromJS(t.data?t.data:{}))});case"ADD_ITEM":var n=s.List.of("document","schema").concat(t.schemaPath),r=s.List.of("document","data").concat(t.dataPath),o=a(e,n,r);return void 0===e.getIn(r)?e.setIn(r,s.List.of(o)):e.updateIn(r,function(e){return e.push(o)});case"ADD_ITEM_ABOVE":var n=s.List.of("document","schema").concat(t.schemaPath),r=s.List.of("document","data").concat(t.dataPath),o=a(e,n.pop(),r.pop()),l=r.last();return e.updateIn(r.pop(),function(e){return s.List.of(e.take(l),s.List.of(o),e.slice(l)).flatten(1)});case"REMOVE_ITEM":var r=s.List.of("document","data").concat(t.dataPath);return e.deleteIn(r);case"MOVE_ITEM_UP":var r=s.List.of("document","data").concat(t.dataPath);return i(e,r.pop(),r.last()-1);case"MOVE_ITEM_DOWN":var r=s.List.of("document","data").concat(t.dataPath);return i(e,r.pop(),r.last());case"FIELD_VALUE_CHANGE":var r=s.List.of("document","data").concat(t.dataPath);return e.updateIn(r,function(e){return c["default"].fromJS(t.newValue)});default:return e}}function a(e,t,n){var r=e.getIn(t).get("fields").map(function(e){switch(e.get("type")){case"ListField":return[e.get("name"),new s.List];case"ImageField":case"FileField":return null;default:return[e.get("name"),""]}});return new s.Map(r.push(["_key",(0,l.getNextId)("item-")]))}function i(e,t,n){return e.updateIn(t,function(e){return s.List.of(e.take(n),e.slice(n+1,n+2),e.slice(n,n+1),e.slice(n+2)).flatten(1)})}function u(e){return(0,s.Map)((0,s.List)(e.entrySeq().map(function(e){return s.List.isList(e[1])?[e[0],e[1].map(u)]:[e[0],e[1]]})).push(["_key",(0,l.getNextId)("item-")]))}Object.defineProperty(n,"__esModule",{value:!0}),n.initialState=void 0,n["default"]=o;var s=e("immutable"),c=r(s),l=e("../utils"),f=n.initialState=c["default"].fromJS({document:{id:window.witlof.documentId,schema:void 0,data:{}}})},{"../utils":17,immutable:"immutable"}],17:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(){var e=arguments.length<=0||void 0===arguments[0]?"GET":arguments[0],t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n={method:e,credentials:"same-origin",headers:{"X-CSRFToken":l}};return"HEAD"!=e&&"GET"!=e&&(n.body=t),n}function a(e){var t={day:"numeric",month:"short",year:"numeric",hour12:!1,hour:"numeric",minute:"numeric"};return new Date(e).toLocaleTimeString("en-US",t)}function i(e,t){var n=e.split(" ").splice(0,t).join(" ");return n.length<e.length?n+" …":e}function u(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];return f++,""+e+f}Object.defineProperty(n,"__esModule",{value:!0}),n.CSRF_TOKEN=void 0,n.fetchInit=o,n.formatDateTime=a,n.truncateWords=i,n.getNextId=u,e("es6-promise"),e("whatwg-fetch");var s=e("js-cookie"),c=r(s),l=n.CSRF_TOKEN=c["default"].get("csrftoken"),f=0},{"es6-promise":18,"js-cookie":"js-cookie","whatwg-fetch":20}],18:[function(e,t,n){(function(r,o){!function(e,r){"object"==typeof n&&"undefined"!=typeof t?t.exports=r():"function"==typeof define&&define.amd?define(r):e.ES6Promise=r()}(this,function(){"use strict";function t(e){return"function"==typeof e||"object"==typeof e&&null!==e}function n(e){return"function"==typeof e}function a(e){X=e}function i(e){$=e}function u(){return function(){return r.nextTick(d)}}function s(){return function(){W(d)}}function c(){var e=0,t=new Z(d),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function l(){var e=new MessageChannel;return e.port1.onmessage=d,function(){return e.port2.postMessage(0)}}function f(){var e=setTimeout;return function(){return e(d,1)}}function d(){for(var e=0;e<K;e+=2){var t=ne[e],n=ne[e+1];t(n),ne[e]=void 0,ne[e+1]=void 0}K=0}function p(){try{var t=e,n=t("vertx");return W=n.runOnLoop||n.runOnContext,s()}catch(r){return f()}}function h(e,t){var n=arguments,r=this,o=new this.constructor(y);void 0===o[oe]&&D(o);var a=r._state;return a?!function(){var e=n[a-1];$(function(){return F(a,o,e,r._result)})}():N(r,o,e,t),o}function m(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(y);return P(n,e),n}function y(){}function b(){return new TypeError("You cannot resolve a promise with itself")}function v(){return new TypeError("A promises callback cannot return that same promise.")}function _(e){try{return e.then}catch(t){return se.error=t,se}}function w(e,t,n,r){try{e.call(t,n,r)}catch(o){return o}}function g(e,t,n){$(function(e){var r=!1,o=w(n,t,function(n){r||(r=!0,t!==n?P(e,n):j(e,n))},function(t){r||(r=!0,k(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&o&&(r=!0,k(e,o))},e)}function E(e,t){t._state===ie?j(e,t._result):t._state===ue?k(e,t._result):N(t,void 0,function(t){return P(e,t)},function(t){return k(e,t)})}function O(e,t,r){t.constructor===e.constructor&&r===h&&t.constructor.resolve===m?E(e,t):r===se?k(e,se.error):void 0===r?j(e,t):n(r)?g(e,t,r):j(e,t)}function P(e,n){e===n?k(e,b()):t(n)?O(e,n,_(n)):j(e,n)}function T(e){e._onerror&&e._onerror(e._result),S(e)}function j(e,t){e._state===ae&&(e._result=t,e._state=ie,0!==e._subscribers.length&&$(S,e))}function k(e,t){e._state===ae&&(e._state=ue,e._result=t,$(T,e))}function N(e,t,n,r){var o=e._subscribers,a=o.length;e._onerror=null,o[a]=t,o[a+ie]=n,o[a+ue]=r,0===a&&e._state&&$(S,e)}function S(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,a=e._result,i=0;i<t.length;i+=3)r=t[i],o=t[i+n],r?F(n,r,o,a):o(a);e._subscribers.length=0}}function I(){this.error=null}function C(e,t){try{return e(t)}catch(n){return ce.error=n,ce}}function F(e,t,r,o){var a=n(r),i=void 0,u=void 0,s=void 0,c=void 0;if(a){if(i=C(r,o),i===ce?(c=!0,u=i.error,i=null):s=!0,t===i)return void k(t,v())}else i=o,s=!0;t._state!==ae||(a&&s?P(t,i):c?k(t,u):e===ie?j(t,i):e===ue&&k(t,i))}function x(e,t){try{t(function(t){P(e,t)},function(t){k(e,t)})}catch(n){k(e,n)}}function M(){return le++}function D(e){e[oe]=le++,e._state=void 0,e._result=void 0,e._subscribers=[]}function R(e,t){this._instanceConstructor=e,this.promise=new e(y),this.promise[oe]||D(this.promise),G(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?j(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&j(this.promise,this._result))):k(this.promise,A())}function A(){return new Error("Array Methods must be provided an Array")}function L(e){return new R(this,e).promise}function U(e){var t=this;return new t(G(e)?function(n,r){for(var o=e.length,a=0;a<o;a++)t.resolve(e[a]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function V(e){var t=this,n=new t(y);return k(n,e),n}function B(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function z(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function q(e){this[oe]=M(),this._result=this._state=void 0,this._subscribers=[],y!==e&&("function"!=typeof e&&B(),this instanceof q?x(this,e):z())}function H(){var e=void 0;if("undefined"!=typeof o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(t){}if("[object Promise]"===r&&!n.cast)return}e.Promise=q}var J=void 0;J=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var G=J,K=0,W=void 0,X=void 0,$=function(e,t){ne[K]=e,ne[K+1]=t,K+=2,2===K&&(X?X(d):re())},Y="undefined"!=typeof window?window:void 0,Q=Y||{},Z=Q.MutationObserver||Q.WebKitMutationObserver,ee="undefined"==typeof self&&"undefined"!=typeof r&&"[object process]"==={}.toString.call(r),te="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ne=new Array(1e3),re=void 0;re=ee?u():Z?c():te?l():void 0===Y&&"function"==typeof e?p():f();var oe=Math.random().toString(36).substring(16),ae=void 0,ie=1,ue=2,se=new I,ce=new I,le=0;return R.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===ae&&n<e;n++)this._eachEntry(t[n],n)},R.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===m){var o=_(e);if(o===h&&e._state!==ae)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===q){var a=new n(y);O(a,e,o),this._willSettleAt(a,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},R.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===ae&&(this._remaining--,e===ue?k(r,n):this._result[t]=n),0===this._remaining&&j(r,this._result)},R.prototype._willSettleAt=function(e,t){var n=this;N(e,void 0,function(e){return n._settledAt(ie,t,e)},function(e){return n._settledAt(ue,t,e)})},q.all=L,q.race=U,q.resolve=m,q.reject=V,q._setScheduler=a,q._setAsap=i,q._asap=$,q.prototype={constructor:q,then:h,"catch":function(e){return this.then(null,e)}},H(),q.polyfill=H,q.Promise=q,q})}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:19}],19:[function(e,t,n){function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(f===setTimeout)return setTimeout(e,0);if((f===r||!f)&&setTimeout)return f=setTimeout,setTimeout(e,0);try{return f(e,0)}catch(t){try{return f.call(null,e,0)}catch(t){return f.call(this,e,0)}}}function i(e){if(d===clearTimeout)return clearTimeout(e);if((d===o||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function u(){y&&h&&(y=!1,h.length?m=h.concat(m):b=-1,m.length&&s())}function s(){if(!y){var e=a(u);y=!0;for(var t=m.length;t;){for(h=m,m=[];++b<t;)h&&h[b].run();b=-1,t=m.length}h=null,y=!1,i(e)}}function c(e,t){this.fun=e,this.array=t}function l(){}var f,d,p=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:r}catch(e){f=r}try{d="function"==typeof clearTimeout?clearTimeout:o}catch(e){d=o}}();var h,m=[],y=!1,b=-1;p.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new c(e,t)),1!==m.length||y||a(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=l,p.addListener=l,p.once=l,p.off=l,p.removeListener=l,p.removeAllListeners=l,p.emit=l,p.binding=function(e){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(e){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],20:[function(e,t,n){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return m.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function a(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function i(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function u(e){var t=new FileReader;return t.readAsArrayBuffer(e),i(t)}function s(e){var t=new FileReader;return t.readAsText(e),i(t)}function c(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(m.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(m.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(e){if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob?(this.blob=function(){var e=a(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(u)},this.text=function(){var e=a(this);if(e)return e;if(this._bodyBlob)return s(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=a(this);return e?e:Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function l(e){var t=e.toUpperCase();return y.indexOf(t)>-1?t:e}function f(e,t){t=t||{};var n=t.body;if(f.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,n||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=l(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function d(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}}),t}function p(e){var t=new o,n=(e.getAllResponseHeaders()||"").trim().split("\n");return n.forEach(function(e){var n=e.trim().split(":"),r=n.shift().trim(),o=n.join(":").trim();t.append(r,o)}),t}function h(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof o?t.headers:new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var m={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};o.prototype.append=function(e,r){e=t(e),r=n(r);var o=this.map[e];o||(o=[],this.map[e]=o),o.push(r)},o.prototype["delete"]=function(e){delete this.map[t(e)]},o.prototype.get=function(e){var n=this.map[t(e)];return n?n[0]:null},o.prototype.getAll=function(e){return this.map[t(e)]||[]},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,r){this.map[t(e)]=[n(r)]},o.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){e.call(t,r,n,this)},this)},this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},m.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this)},c.call(f.prototype),c.call(h.prototype),h.prototype.clone=function(){return new h(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},h.error=function(){var e=new h(null,{status:0,statusText:""});return e.type="error",e};var b=[301,302,303,307,308];h.redirect=function(e,t){if(b.indexOf(t)===-1)throw new RangeError("Invalid status code");return new h(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=f,e.Response=h,e.fetch=function(e,t){return new Promise(function(n,r){function o(){return"responseURL"in i?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):void 0}var a;a=f.prototype.isPrototypeOf(e)&&!t?e:new f(e,t);var i=new XMLHttpRequest;i.onload=function(){var e={status:i.status,statusText:i.statusText,headers:p(i),url:o()},t="response"in i?i.response:i.responseText;n(new h(t,e))},i.onerror=function(){r(new TypeError("Network request failed"))},i.ontimeout=function(){r(new TypeError("Network request failed"))},i.open(a.method,a.url,!0),"include"===a.credentials&&(i.withCredentials=!0),"responseType"in i&&m.blob&&(i.responseType="blob"),a.headers.forEach(function(e,t){i.setRequestHeader(t,e)}),i.send("undefined"==typeof a._bodyInit?null:a._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},{}]},{},[15]);
//# sourceMappingURL=document.js.map
